class t{constructor(t){return this.sketch=t,this.THREE=this.sketch.THREE,this.scene=new this.THREE.Scene,this.scene.background=new this.THREE.Color(16777215),this.scene}}class s{constructor(t){return this.sketch=t,this.THREE=this.sketch.THREE,this.renderer=new this.THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.sketch.sizes.width,this.sketch.sizes.height),this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.THREE.PCFSoftShadowMap,this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=this.THREE.sRGBEncoding,this.renderer.toneMapping=this.THREE.ACESFilmicToneMapping,this.renderer.update=this.update.bind(this.sketch),this.renderer}update(){this.renderer.render(this.scene,this.camera)}}class e{constructor(t){return this.sketch=t,this.THREE=this.sketch.THREE,this.camera=new this.THREE.PerspectiveCamera(75,this.sketch.sizes.width/this.sketch.sizes.height,1,200),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=2,this.sketch.scene.add(this.camera),this.camera}}class i{constructor(t){this.sketch=t,this.THREE=this.sketch.THREE,this.add()}add(){this.light=new this.THREE.HemisphereLight(16777147,526368,1),this.sketch.scene.add(this.light)}remove(){this.sketch.scene.remove(this.light)}}class h{constructor(t,s){this.sketch=t,this.THREE=this.sketch.THREE,this.settings={...s},this.addEvents()}addEvents(){window.addEventListener("resize",this.onWindowResize.bind(this),!1)}onWindowResize(){this.sketch.sizes={width:window.innerWidth,height:window.innerHeight},this.sketch.camera.aspect=this.sketch.sizes.width/this.sketch.sizes.height,this.sketch.camera.updateProjectionMatrix(),this.sketch.renderer.setSize(this.sketch.sizes.width,this.sketch.sizes.height),this.sketch.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio))}}class n{constructor(t,s){this.sketch=t,this.THREE=this.sketch.THREE,this.settings={...s},this.tasks=[]}add(t){this.tasks.push(t)}animate(){requestAnimationFrame(this.animate.bind(this)),this.tasks.forEach((t=>t())),this.sketch.renderer.update()}}class r{constructor(t,s){this.sketch=t,this.THREE=t.THREE,this.settings={load:()=>{this.sketch.init()},progress:(t,s,e)=>{},gltfExtensions:[".gltf",".glb"],objExtensions:[".obj"],textureExtensions:[".jpg",".jpeg",".png",".gif",".bmp",".tga"],...s},this.manager=new this.THREE.LoadingManager((()=>this.settings.load()),((t,s,e)=>this.settings.progress(t,s,e))),this.setUpLoaders()}setUpLoaders(){this.TextureLoader=!1,this.GLTFLoader=!1,this.OBJLoader=!1,this.sketch.settings.GLTFLoader&&(this.GLTFLoader=new this.sketch.settings.GLTFLoader(this.manager)),this.sketch.settings.OBJLoader&&(this.OBJLoader=new this.sketch.settings.OBJLoader(this.manager)),this.TextureLoader=new this.THREE.TextureLoader(this.manager)}load(){for(const t in this.sketch.settings.preload){let s=this.sketch.settings.preload[t];if(this.settings.gltfExtensions.some((t=>s.endsWith(t))))this.GLTFLoader.load(s,(s=>{this.sketch[t]=s.scene}));else{if(this.settings.objExtensions.some((t=>s.endsWith(t))))this.OBJLoader.load(s,(s=>{console.log(s),this.sketch[t]=s}));else{this.settings.textureExtensions.some((t=>s.endsWith(t)))&&this.TextureLoader.load(s,(s=>{this.sketch[t]=s,this.setUpTexture(this.sketch[t])}))}}}}setUpTexture(t){this.THREE.sRGBEncoding,this.THREE.RepeatWrapping,this.THREE.RepeatWrapping}}class a{constructor(t,s){this.sketch=t,this.THREE=this.sketch.THREE,this.tasks=[]}add(t){this.tasks.push(t)}load(){this.tasks.forEach((t=>t()))}}class o{constructor(o,d){this.settings={...d},this.THREE=o,this.animator=new n(this),this.sizes={width:window.innerWidth,height:window.innerHeight},this.scene=new t(this),this.renderer=new s(this),this.camera=new e(this),this.light=new i(this),this.events=new h(this),this.loader=new r(this),this.postLoader=new a(this),this.clock=new o.Clock,this.clock.start(),document.body.appendChild(this.renderer.domElement),this.preload()}preload(){this.settings.preload?this.loader.load():this.init()}init(){this.postLoader.load(),this.animator.animate()}}export{o as default};
